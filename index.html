<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>TrÃ¬nh mÃ´ phá»ng phÃ¡o hoa</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="theme-color" content="#000000" />
		<link rel="shortcut icon" type="image/png" href="./images/favicon.png" />
		<link rel="icon" type="image/png" href="./images/favicon.png" />
		<link rel="apple-touch-icon-precomposed" href="./images/favicon.png" />
		<!-- ThÆ° viá»‡n CSS Clip Path Helper -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/clippy.js/1.0.0/clippy.min.css" />
		<style>

			/* Fallback mask cho trÃ¬nh duyá»‡t cÅ© */
			@supports not (clip-path: path("M 120 224 C 8 144 0 72 60 40 C 96 24 120 40 120 56 C 120 40 144 24 180 40 C 240 72 232 144 120 224 Z")) {
				.shape-heart img {
					mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240"><path d="M120 224 C8 144 0 72 60 40 C96 24 120 40 120 56 C120 40 144 24 180 40 C240 72 232 144 120 224 Z" fill="white"/></svg>');
					-webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240"><path d="M120 224 C8 144 0 72 60 40 C96 24 120 40 120 56 C120 40 144 24 180 40 C240 72 232 144 120 224 Z" fill="white"/></svg>');
					mask-size: contain;
					-webkit-mask-size: contain;
					mask-repeat: no-repeat;
					-webkit-mask-repeat: no-repeat;
				}
			}

			/* Layer chá»©a lá»i chÃºc bay trÃªn ná»n phÃ¡o hoa */
			.wishes-layer {
				position: absolute;
				inset: 0;
				z-index: 10; /* Hiá»ƒn thá»‹ trÃªn canvas */
				pointer-events: none; /* khÃ´ng cháº·n click vÃ o canvas / nÃºt Ä‘iá»u khiá»ƒn */
				transform-origin: center center;
				transform-style: preserve-3d; /* Cho phÃ©p 3D transform */
				will-change: transform; /* Tá»‘i Æ°u performance */
			}

			/* Táº¯t transition khi Ä‘ang drag Ä‘á»ƒ giáº£m lag */
			.wishes-layer.dragging {
				transition: none;
			}

			/* Wrapper anim bay lÃªn (dÃ¹ng transform riÃªng) */
			.wish-wrapper {
				position: absolute;
				bottom: -3rem;
				left: 50%;
				transform: translateX(-50%) translateY(0);
				opacity: 0;
				pointer-events: none; /* báº£n thÃ¢n wrapper khÃ´ng nháº­n sá»± kiá»‡n */
			}

			/* CÃ¢u chÃºc mÃ u há»“ng phÃ¡t sÃ¡ng, cÃ³ thá»ƒ xoay / thu phÃ³ng báº±ng tay */
			.wish-text {
				display: inline-block;
				font-size: 1.1rem;
				padding: 0.4rem 1rem;
				border-radius: 999px;
				color: #ff9ad9;
				text-shadow:
					0 0 6px rgba(255, 105, 180, 0.9),
					0 0 18px rgba(255, 20, 147, 0.8);
				background: rgba(0, 0, 0, 0.3);
				border: 1px solid rgba(255, 192, 203, 0.7);
				box-shadow:
					0 0 14px rgba(255, 105, 180, 0.7),
					0 0 32px rgba(255, 20, 147, 0.4);
				white-space: nowrap;
				transform-origin: center center;
				pointer-events: auto; /* cho phÃ©p cháº¡m/drag Ä‘á»ƒ xoay, scale */
			}

			/* Responsive cho mobile */
			@media (max-width: 768px) {
				.wish-text {
					font-size: 0.9rem; /* TÄƒng font-size má»™t chÃºt Ä‘á»ƒ Ä‘á»c tá»‘t hÆ¡n */
					padding: 0.35rem 1rem; /* TÄƒng padding Ä‘á»ƒ cÃ³ khÃ´ng gian hÆ¡n */
					max-width: 92vw; /* TÄƒng max-width Ä‘á»ƒ hiá»ƒn thá»‹ nhiá»u chá»¯ hÆ¡n */
					min-width: 200px; /* Äáº£m báº£o chiá»u rá»™ng tá»‘i thiá»ƒu */
					white-space: normal; /* Cho phÃ©p xuá»‘ng dÃ²ng trÃªn mobile */
					word-wrap: break-word;
					word-break: break-word; /* Ngáº¯t tá»« tá»‘t hÆ¡n */
					display: -webkit-box;
					-webkit-line-clamp: 2; /* Giá»›i háº¡n tá»‘i Ä‘a 2 dÃ²ng */
					line-clamp: 2; /* Thuá»™c tÃ­nh chuáº©n */
					-webkit-box-orient: vertical;
					overflow: hidden;
					text-overflow: ellipsis;
					line-height: 1.5; /* TÄƒng line-height Ä‘á»ƒ Ä‘á»c tá»‘t hÆ¡n */
				}
			}

			@media (max-width: 480px) {
				.wish-text {
					font-size: 0.8rem;
					padding: 0.3rem 0.85rem;
					max-width: 94vw; /* TÄƒng max-width trÃªn mobile nhá» */
					min-width: 180px; /* Chiá»u rá»™ng tá»‘i thiá»ƒu */
					-webkit-line-clamp: 2; /* Váº«n giá»›i háº¡n 2 dÃ²ng trÃªn mobile nhá» */
					line-clamp: 2; /* Thuá»™c tÃ­nh chuáº©n */
					line-height: 1.4;
				}
			}

			/* Bay cháº­m Ä‘á»u tá»« dÆ°á»›i lÃªn trÃªn */
			@keyframes wishFloatUp {
				0% {
					opacity: 0;
					transform: translateX(-50%) translateY(10vh);
				}
				15% {
					opacity: 1;
				}
				100% {
					opacity: 0;
					transform: translateX(-50%) translateY(-110vh);
				}
			}

			.wish-animate {
				animation: wishFloatUp 7s linear forwards;
			}

			/* áº¢nh bay lÃªn cÃ¹ng cÃ¢u chÃºc */
			.wish-image {
				display: inline-block;
				width: 120px;
				height: 120px;
				object-fit: cover;
				border-radius: 12px;
				border: 3px solid rgba(255, 192, 203, 0.9);
				box-shadow:
					0 0 20px rgba(255, 105, 180, 0.8),
					0 0 40px rgba(255, 20, 147, 0.6),
					0 0 60px rgba(255, 20, 147, 0.4),
					inset 0 0 20px rgba(255, 192, 203, 0.3);
				transform-origin: center center;
				pointer-events: auto;
				animation: imageGlow 2s ease-in-out infinite alternate;
			}

			/* Responsive áº£nh bay lÃªn cho mobile */
			@media (max-width: 768px) {
				.wish-image {
					width: 80px;
					height: 80px;
					border-width: 2px;
					border-radius: 8px;
				}
			}

			@media (max-width: 480px) {
				.wish-image {
					width: 60px;
					height: 60px;
					border-width: 2px;
					border-radius: 6px;
				}
			}

			/* Hiá»‡u á»©ng phÃ¡t sÃ¡ng cho áº£nh */
			@keyframes imageGlow {
				0% {
					box-shadow:
						0 0 20px rgba(255, 105, 180, 0.8),
						0 0 40px rgba(255, 20, 147, 0.6),
						0 0 60px rgba(255, 20, 147, 0.4),
						inset 0 0 20px rgba(255, 192, 203, 0.3);
					border-color: rgba(255, 192, 203, 0.9);
				}
				100% {
					box-shadow:
						0 0 30px rgba(255, 105, 180, 1),
						0 0 60px rgba(255, 20, 147, 0.9),
						0 0 90px rgba(255, 20, 147, 0.7),
						inset 0 0 30px rgba(255, 192, 203, 0.5);
					border-color: rgba(255, 255, 255, 1);
				}
			}

			/* Wrapper cho áº£nh */
			.wish-image-wrapper {
				position: absolute;
				bottom: -3rem;
				left: 50%;
				transform: translateX(-50%) translateY(0);
				opacity: 0;
				pointer-events: none;
			}

			/* áº¨n nÃºt pause vÃ  nÃºt cÃ i Ä‘áº·t */
			.pause-btn,
			.settings-btn {
				display: none !important;
			}
		</style>
		<meta name="msapplication-TileColor" content="#000000" />
		<meta name="msapplication-TileImage" content="./images/favicon.png" />
		<link href="./fonts/css.css" rel="stylesheet" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet" />
		<link rel="stylesheet" href="./css/style.css" />
	</head>
	<body>
		<!-- partial:index.partial.html -->
		<!-- SVG Spritesheet -->
		<div style="height: 0; width: 0; position: absolute; visibility: hidden">
			<svg xmlns="http://www.w3.org/2000/svg">
				<symbol id="icon-play" viewBox="0 0 24 24">
					<path d="M8 5v14l11-7z" />
				</symbol>
				<symbol id="icon-pause" viewBox="0 0 24 24">
					<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
				</symbol>
				<symbol id="icon-close" viewBox="0 0 24 24">
					<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
				</symbol>
				<symbol id="icon-settings" viewBox="0 0 24 24">
					<path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" />
				</symbol>
				<symbol id="icon-sound-on" viewBox="0 0 24 24">
					<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
				</symbol>
				<symbol id="icon-sound-off" viewBox="0 0 24 24">
					<path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" />
				</symbol>
				<symbol id="icon-stop-wishes" viewBox="0 0 24 24">
					<path d="M6 6h12v12H6z" />
				</symbol>
			</svg>
		</div>
		<!-- App -->
		<div class="container">
			<div class="stage-container remove">
				<!-- Layer lá»i chÃºc bay trÃªn trá»i -->
				<div class="wishes-layer" id="wishes-layer"></div>
				<div class="canvas-container">
					<canvas id="trails-canvas"> </canvas>
					<canvas id="main-canvas"> </canvas>
				</div>
				<div class="controls">
					<div class="btn pause-btn">
						<svg fill="white" width="24" height="24">
							<use href="#icon-pause" xlink:href="#icon-pause"></use>
						</svg>
					</div>
					<div class="btn sound-btn">
						<svg fill="white" width="24" height="24">
							<use href="#icon-sound-off" xlink:href="#icon-sound-off"></use>
						</svg>
					</div>
					<div class="btn stop-wishes-btn">
						<svg fill="white" width="24" height="24">
							<use href="#icon-stop-wishes" xlink:href="#icon-stop-wishes"></use>
						</svg>
					</div>
					<div class="btn settings-btn">
						<svg fill="white" width="24" height="24">
							<use href="#icon-settings" xlink:href="#icon-settings"></use>
						</svg>
					</div>
				</div>
				<div class="menu hide">
					<div class="menu__inner-wrap">
						<div class="btn btn--bright close-menu-btn">
							<svg fill="white" width="24" height="24">
								<use href="#icon-close" xlink:href="#icon-close"></use>
							</svg>
						</div>
						<div class="menu__header">CÃ i Ä‘áº·t</div>
						<div class="menu__subheader">Äá»ƒ biáº¿t thÃªm thÃ´ng tin hÃ£y nháº¥p vÃ o báº¥t ká»³ nhÃ£n nÃ o</div>
						<form>
							<div class="form-option form-option--select">
								<label class="shell-type-label"> Loáº¡i phÃ¡o hoa </label>
								<select class="shell-type"></select>
							</div>
							<div class="form-option form-option--select">
								<label class="shell-size-label"> KÃ­ch thÆ°á»›c phÃ¡o hoa </label>
								<select class="shell-size"></select>
							</div>
							<div class="form-option form-option--select">
								<label class="quality-ui-label"> Cháº¥t lÆ°á»£ng hiá»ƒn thá»‹ </label>
								<select class="quality-ui"></select>
							</div>
							<div class="form-option form-option--select">
								<label class="sky-lighting-label"> Äá»™ sÃ¡ng báº§u trá»i </label>
								<select class="sky-lighting"></select>
							</div>
							<div class="form-option form-option--select">
								<label class="scaleFactor-label"> Thu phÃ³ng </label>
								<select class="scaleFactor"></select>
							</div>
							<div class="form-option form-option--checkbox">
								<label class="word-shell-label"> PhÃ¡o hoa chá»¯ </label>
								<input class="word-shell" type="checkbox" />
							</div>
							<div class="form-option form-option--checkbox">
								<label class="auto-launch-label"> Tá»± Ä‘á»™ng báº¯n phÃ¡o </label>
								<input class="auto-launch" type="checkbox" />
							</div>
							<div class="form-option form-option--checkbox form-option--finale-mode">
								<label class="finale-mode-label"> Báº¯n nhiá»u phÃ¡o hoa cÃ¹ng lÃºc </label>
								<input class="finale-mode" type="checkbox" />
							</div>
							<div class="form-option form-option--checkbox">
								<label class="hide-controls-label"> áº¨n nÃºt Ä‘iá»u khiá»ƒn </label>
								<input class="hide-controls" type="checkbox" />
							</div>
							<div class="form-option form-option--checkbox form-option--fullscreen">
								<label class="fullscreen-label"> ToÃ n mÃ n hÃ¬nh </label>
								<input class="fullscreen" type="checkbox" />
							</div>
							<div class="form-option form-option--checkbox">
								<label class="long-exposure-label"> Giá»¯ vá»‡t sÃ¡ng phÃ¡o hoa </label>
								<input class="long-exposure" type="checkbox" />
							</div>
						</form>
						<div class="credits">
							<p class="copyright">
								<script>
									var mydate = new Date();
									document.writeln("Copyright&nbsp;&copy;&nbsp;2021 - " + mydate.getFullYear() + '&nbsp;<a target="_blank" href="https://www.nianbroken.top/">ç¢å¿µ_Nian</a><br />All&nbsp;Rights&nbsp;Reserved');
								</script>
							</p>
						</div>
					</div>
				</div>
			</div>
			<div class="help-modal">
				<div class="help-modal__overlay"></div>
				<div class="help-modal__dialog">
					<div class="help-modal__header"></div>
					<div class="help-modal__body"></div>
					<button type="button" class="help-modal__close-btn">ÄÃ³ng</button>
				</div>
			</div>
		</div>

		<!-- partial -->
		<script src="./js/fscreen.js"></script>
		<script src="./js/Stage.js"></script>
		<script src="./js/MyMath.js"></script>
		<script src="./js/script.js"></script>
	<audio id="audio-player" loop>
    <source src="./audio/Rain.mp3" type="audio/mp3">
</audio>

<div id="loi-chuc-box" class="loi-chuc-rieng"></div>

<script>
	const loiChucSinhNhat = "Xin chÃ o khÃ´ng biáº¿t e cÃ³ Ä‘á»c Ä‘Æ°á»£c tin nháº¯n nÃ y khÃ´ng nhÆ°ng mÃ  â€œ ChÃºc em SNVV nha , mong ráº±ng má»i thá»© vá»›i em Ä‘á»u thuáº­n lá»£i vÃ  gáº·p tháº­t nhiá»u may máº¯n nha ğŸ˜â€œ \nKo biáº¿t cs cá»§a e dáº¡o nÃ y sao rá»“i, mong ráº±ng má»i thá»© Ä‘á»u tá»‘t ğŸ˜†. CÅ©ng sáº¯p táº¿t rá»“i, chuáº©n bá»‹ Ä‘Æ°á»£c nhiá»u chÆ°a. Náº¿u cÃ³ dá»‹p Ä‘á»c Ä‘Æ°á»£c, chÃºc em luÃ´n khá»e, an yÃªn vÃ  má»™t nÄƒm má»›i tháº­t bÃ¬nh an ğŸ‘ğŸ»\nNhá»› cÆ°á»i nhiá»u lÃªn nha, Äƒn Ã­t Ä‘á»“ cay thÃ´i, ngá»§ sá»›m vÃ  ra ngoÃ i nhá»› khoÃ¡c Ã¡o vÃ´ nha ğŸ˜ \n\n Táº M BIá»†T ğŸ˜";

const boxElement = document.getElementById("loi-chuc-box");
let i = 0;
const tocDoGo = 50; // Tá»‘c Ä‘á»™ gÃµ (sá»‘ cÃ ng nhá» gÃµ cÃ ng nhanh)

function goChu() {
    if (i < loiChucSinhNhat.length) {
        // Xá»­ lÃ½ xuá»‘ng dÃ²ng
        if (loiChucSinhNhat.charAt(i) === '\n') {
            boxElement.innerHTML += '<br>';
        } else {
            boxElement.innerHTML += loiChucSinhNhat.charAt(i);
        }
        i++;
        setTimeout(goChu, tocDoGo);
    }
}

// Báº¯t Ä‘áº§u cháº¡y hiá»‡u á»©ng
goChu();
    // Äoáº¡n script xá»­ lÃ½ báº­t táº¯t nháº¡c
    document.addEventListener('DOMContentLoaded', function() {
        const soundBtn = document.querySelector('.sound-btn');
        const audio = document.getElementById('audio-player');
        const iconUse = soundBtn.querySelector('use');
        
        // Máº·c Ä‘á»‹nh trÃ¬nh duyá»‡t cháº·n tá»± phÃ¡t nháº¡c, nÃªn ta cáº§n báº¯t sá»± kiá»‡n click Ä‘áº§u tiÃªn
        let isPlaying = false;

        soundBtn.addEventListener('click', function() {
            if (isPlaying) {
                audio.pause();
                // Äá»•i icon thÃ nh táº¯t tiáº¿ng
                iconUse.setAttribute('href', '#icon-sound-off');
                iconUse.setAttribute('xlink:href', '#icon-sound-off');
                isPlaying = false;
            } else {
                audio.play().then(() => {
                    // Äá»•i icon thÃ nh báº­t tiáº¿ng
                    iconUse.setAttribute('href', '#icon-sound-on');
                    iconUse.setAttribute('xlink:href', '#icon-sound-on');
                    isPlaying = true;
                }).catch(error => {
                    console.log("TrÃ¬nh duyá»‡t cháº·n phÃ¡t nháº¡c: ", error);
                });
            }
        });

        // (TÃ¹y chá»n) Tá»± Ä‘á»™ng phÃ¡t nháº¡c khi ngÆ°á»i dÃ¹ng click báº¥t ká»³ Ä‘Ã¢u trÃªn mÃ n hÃ¬nh láº§n Ä‘áº§u tiÃªn
        // VÃ¬ chÃ­nh sÃ¡ch trÃ¬nh duyá»‡t khÃ´ng cho nháº¡c tá»± cháº¡y náº¿u chÆ°a tÆ°Æ¡ng tÃ¡c
        function autoPlayOnFirstClick() {
            audio.play().then(() => {
                iconUse.setAttribute('href', '#icon-sound-on');
                iconUse.setAttribute('xlink:href', '#icon-sound-on');
                isPlaying = true;
                // XÃ³a sá»± kiá»‡n nÃ y sau khi Ä‘Ã£ cháº¡y 1 láº§n
                document.removeEventListener('click', autoPlayOnFirstClick);
            }).catch(() => {});
        }
        document.addEventListener('click', autoPlayOnFirstClick);
    });

	// ==========================================================
function taoVatTheRoi() {
        const icons = ['ğŸ‚', 'ğŸˆ', 'ğŸ', 'âœ¨', 'ğŸ‰', 'ğŸ°'];
        const icon = document.createElement('div');
        icon.innerText = icons[Math.floor(Math.random() * icons.length)];
        icon.classList.add('vat-the-roi');
        icon.style.left = Math.random() * 100 + 'vw';
        const size = Math.random() * 20 + 15;
        icon.style.fontSize = size + 'px';
        const duration = Math.random() * 3 + 4;
        icon.style.animationDuration = duration + 's';
        document.body.appendChild(icon);
        setTimeout(() => { icon.remove(); }, duration * 1000);
    }
    setInterval(taoVatTheRoi, 400); 

    // --- PHáº¦N 2: Xá»¬ LÃ POPUP + áº¨N NÃšT ---
    function moPopup() {
        // 1. áº¨n nÃºt Ä‘i ngay láº­p tá»©c
        document.getElementById("nut-li-xi").style.display = "none"; 

        // 2. Cáº¤U HÃŒNH áº¢NH VÃ€ Lá»œI CHÃšC
        const linkAnh = "./images/10.png"; // Nhá»› kiá»ƒm tra Ä‘Ãºng tÃªn file áº£nh cá»§a báº¡n nhÃ©
        
        // Giá»¯ nguyÃªn ná»™i dung cá»§a báº¡n cÃ³ \n
        const loiChucCoDinh = "CÃ¡i nháº«n nÃ y ğŸ’\n\nTrÆ°á»›c anh mua Ä‘á»ƒ Ä‘á»‹nh táº·ng em trong láº§n háº¹n gáº·p, nhÆ°ng khÃ´ng cÃ³ cÆ¡ há»™i gáº·p nhau.\nAnh muá»‘n há»i em lÃ : em cÃ³ muá»‘n nháº­n khÃ´ng? KhÃ´ng thÃ¬ cÅ©ng khÃ´ng sao ğŸ™‚\n\nChÃºc em sinh nháº­t vui váº» ğŸ";

        // 3. Táº¡o mÃ£ HTML
        // --- QUAN TRá»ŒNG: ThÃªm .replace(/\n/g, '<br>') Ä‘á»ƒ Ä‘á»•i \n thÃ nh tháº» xuá»‘ng dÃ²ng ---
        const noiDungHienThi = `
            <img src="${linkAnh}" alt="Gift" style="width: 100%; max-width: 300px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
            
            <div style="font-size: 16px; font-weight: normal; color: #333; line-height: 1.6; text-align: left;">
                ${loiChucCoDinh.replace(/\n/g, '<br>')} 
            </div>
        `;
        
        // 4. GÃ¡n ná»™i dung vÃ o popup
        document.getElementById("loi-chuc-text").innerHTML = noiDungHienThi;
        
        // 5. Hiá»ƒn thá»‹ popup
        document.getElementById("popup-lixi").style.display = "flex";
    }

	// const loiChucSinhNhat = "13/02/2026\nXin chÃ o khÃ´ng biáº¿t e cÃ³ Ä‘á»c Ä‘Æ°á»£c tin nháº¯n nÃ y khÃ´ng nhÆ°ng mÃ  â€œ ChÃºc em SNVV nha , mong ráº±ng má»i thá»© vá»›i em Ä‘á»u thuáº­n lá»£i vÃ  gáº·p tháº­t nhiá»u may máº¯n nha ğŸ˜â€œ \nKo biáº¿t cs cá»§a e dáº¡o nÃ y sao rá»“i, mong ráº±ng má»i thá»© Ä‘á»u tá»‘t ğŸ˜†. CÅ©ng sáº¯p táº¿t rá»“i, chuáº©n bá»‹ Ä‘Æ°á»£c nhiá»u chÆ°a. \nNáº¿u 1 lÃºc nÃ o Ä‘Ã³ Ä‘á»c Ä‘Æ°á»£c tin nháº¯n nÃ y thÃ¬ chÃºc em tuá»•i má»›i nhiá»u sá»©c khoáº» nha, lÃ²ng thÃ¬ lÃºc nÃ o cx an yÃªn vÃ  sáº½ cÃ³ 1 cÃ¡i táº¿t tháº­t vv, 1 nÄƒm tá»›i tháº­t nhiá»u Ä‘iá»u tá»‘t lÃ nh vÃ  1 Ä‘á»i tháº­t bÃ¬nh an nha ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»\n\nNhá»› cÆ°á»i nhiá»u lÃªn nha, Äƒn Ã­t Ä‘á»“ cay thÃ´i, ngá»§ sá»›m vÃ  ra ngoÃ i nhá»› khoÃ¡c Ã¡o vÃ´ nha ğŸ˜ \n\n Táº M BIá»†T ";

    // --- HÃ€M 2: ÄÃ“NG POPUP & HIá»†N THIá»†P (Giá»¯ nguyÃªn logic cÅ©) ---
    function dongPopup() {
        // áº¨n popup LÃ¬ xÃ¬
        document.getElementById('popup-lixi').style.display = 'none';

        // Gá»i ngay hÃ m hiá»ƒn thá»‹ thiá»‡p
        hienThiThiep();
    }

    // --- HÃ€M 3: Xá»­ lÃ½ hiá»‡n thiá»‡p vÃ  gá»i gÃµ chá»¯ ---
    function hienThiThiep() {
        const overlay = document.getElementById('bd-overlay');
        const card = document.querySelector('.bd-card');
        const msgBox = document.getElementById('bd-msg');

        // Reset ná»™i dung cÅ©
        msgBox.innerHTML = ''; 
        msgBox.classList.add('typing-cursor'); 
        
        // áº¨n nÃºt "Cáº£m Æ¡n"
        const btnClose = document.getElementById('bd-close');
        if(btnClose) btnClose.classList.remove('visible');

        // Hiá»ƒn thá»‹ khung ná»n tá»‘i
        overlay.style.display = 'flex';
        
        // Delay hiá»‡u á»©ng
        setTimeout(() => { 
            card.classList.add('show'); 
            // Gá»i hÃ m gÃµ chá»¯ (Äáº£m báº£o báº¡n Ä‘Ã£ khai bÃ¡o biáº¿n loiChucSinhNhat á»Ÿ Ä‘Ã¢u Ä‘Ã³)
            if (typeof typeWriter === "function" && typeof loiChucSinhNhat !== "undefined") {
                typeWriter(loiChucSinhNhat, 'bd-msg');
            }
        }, 100);
    }

</script>
<button id="nut-li-xi" onclick="moPopup()" style="background: linear-gradient(to right, #ff758c, #ff7eb3);">
    ğŸ‚ Open me ğŸ‚
</button>

<div id="popup-lixi" class="popup-overlay">
    <div class="popup-content">
        <div class="popup-title">Happy Birthday ğŸ‰</div>
        <div id="loi-chuc-text">...</div>
        <button class="btn-close" onclick="dongPopup()">Äá»c tiáº¿p â¤ï¸</button>
    </div>
</div>
<!-- ===================================
		POPUP
=================================== -->
<div id="bd-overlay">
    <div class="bd-card">
        <div class="bd-icon">ğŸ‚</div>
        
        <div class="bd-title">Happy Birthday!</div>
        
        <div id="bd-msg" class="bd-msg typing-cursor"></div>

        <button id="bd-close" onclick="closePopup()">Háº¡nh phÃºc nhÃ©! â¤ï¸</button>
    </div>
</div>
	</body>
	
</html>
